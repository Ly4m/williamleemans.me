---
import AnimatedLogo from "./AnimatedLogo.astro";
interface NavItem {
  label: string;
  href: string;
  icon?: string; // Optional icon for mobile display
}

interface SocialLink {
  label: string;
  href: string;
  icon: string;
}

const { items = [] }: { items?: NavItem[] } = Astro.props;
const current = Astro.url.pathname;

const isActive = (href: string, current: string) => {
  if (href === "/") return current === "/";
  return current === href || current.startsWith(href + "/");
};

const socialLinks: SocialLink[] = [
  {
    label: "GitHub",
    href: "https://github.com/Ly4m",
    icon: "icon-[tabler--brand-github]",
  },
  {
    label: "LinkedIn",
    href: "https://www.linkedin.com/in/wleemans",
    icon: "icon-[tabler--brand-linkedin]",
  },
];
---

<!-- Mobile header with icons -->
<header
  class="fixed inset-x-0 top-0 z-50 flex h-14 items-center justify-between px-4 md:hidden bg-primary-100"
>
  <AnimatedLogo />

  <!-- Mobile navigation icons -->
  <nav class="flex items-center gap-3">
    {
      items.map(({ label, href, icon }) => {
        const active = isActive(href, current);
        return (
          <a
            href={href}
            class={[
              "flex h-8 w-8 items-center justify-center rounded-md text-sm transition",
              active
                ? "bg-black text-white"
                : "text-gray-600 hover:bg-gray-100 hover:text-black",
            ].join(" ")}
            title={label}
          >
            {icon ? (
              <i class={`iconify ${icon} text-lg`} />
            ) : (
              <span class="text-xs font-medium uppercase">
                {label.charAt(0)}
              </span>
            )}
          </a>
        );
      })
    }

    <!-- Social links for mobile -->
    <div class="ml-2 flex gap-2 border-l border-gray-200 pl-3">
      {
        socialLinks.map((s) => {
          return (
            <a
              href={s.href}
              rel="noopener noreferrer"
              target="_blank"
              class="flex h-8 w-8 items-center justify-center rounded-md text-gray-600 hover:bg-gray-100 hover:text-black"
              title={s.label}
            >
              <i class={["text-lg", s.icon].join(" ")} aria-hidden="true" />
            </a>
          );
        })
      }
    </div>
  </nav>
</header>

<!-- Desktop sidebar navigation -->
<aside
  class="text-charcoal sticky top-0 z-40 hidden h-screen w-24 pt-24 md:block lg:block"
  aria-label="Side Navigation"
>
  <nav class="space-y-2 py-6 pl-6">
    {
      items.map(({ label, href }) => {
        const active =
          current === href || (href !== "/" && current.startsWith(href));
        return (
          <a
            href={href}
            class={[
              "group block px-3 py-2 text-sm tracking-wide uppercase transition",
              "border-l-2",
              active
                ? "border-black font-medium"
                : "border-transparent opacity-70 hover:opacity-100",
            ].join(" ")}
          >
            <span class="inline-block translate-x-0 transition group-hover:translate-x-1">
              {label}
            </span>
          </a>
        );
      })
    }
  </nav>

  <div class="flex gap-2pr-3 absolute bottom-6">
    {
      socialLinks.map((s) => {
        return (
          <a
            href={s.href}
            rel="noopener noreferrer"
            target="_blank"
            class="flex h-8 w-8 items-center justify-center rounded-md text-gray-600 hover:bg-gray-100 hover:text-black"
            title={s.label}
          >
            <i class={["text-lg", s.icon].join(" ")} aria-hidden="true" />
          </a>
        );
      })
    }
  </div>
</aside>
